const {Transformer} = require('@parcel/plugin');

let wait = ms => new Promise(resolve => setTimeout(resolve, ms));

module.exports = new Transformer({
  async transform({asset}) {
    let code = await asset.getCode();
    if (code.includes('bar')) {
      asset.setCode(code+require("./dummy-module"));
    } else {
      //await wait(3000);
    }
    return [asset];
  }
});
